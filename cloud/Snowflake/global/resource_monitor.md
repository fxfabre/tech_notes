# Resource monitor

- Acces par UI : Admin > Cost management
- Must be AccountAdmin to manage them
- Can delegate 1 RM to a different role
- Limite daily / weekly / monthly
- Can not control cloud services usage
  - eg : Serverless costs generated by materialized view

Types of RM :
- Account monitor : Total credit consumption across all warehouses
Can have only 1 account monitor
- Warehouse : limite usage on 1 or a group of warehouses

```sql
CREATE RESOURCE MONITOR tasty_test_rm
WITH 
    CREDIT_QUOTA = 20 -- 20 credits
    FREQUENCY = daily
    START_TIMESTAMP = immediately
    TRIGGERS 
        ON 80 PERCENT DO NOTIFY -- notify accountadmins at 80%
        ON 100 PERCENT DO SUSPEND -- suspend warehouse at 100 percent, let queries finish
        ON 110 PERCENT DO SUSPEND_IMMEDIATE; -- suspend warehouse and cancel all queries at 110 percent

ALTER WAREHOUSE tasty_de_wh SET RESOURCE_MONITOR = tasty_test_rm;
ALTER RESOURCE MONITOR tasty_test_rm SET CREDIT_QUOTA=30;
SHOW RESOURCE MONITORS;
DROP RESOURCE MONITOR tasty_test_rm;
```
